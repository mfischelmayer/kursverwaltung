
:important-caption: ‚ùó
:tip-caption: üí°

= Projekt Kursverwaltung
Michael Fischelmayer <fischelmayer.at>

Folgende Vorkenntnisse sind erforderlich:

* Klassen und Objekte, Objektinteraktion, primitive und komplexe Datentypen
* Methoden, Konstruktoren
* Bedingungen, Schleifen (for-each; while)
* Collections (`List`, `Map`), Iterator
* Statische Methoden (`static`), Konstanten (`final`)
* Umgang mit der Javadoc (wie und wo finde ich Informationen zu Bibliotheksklassen um diese einsetzen zu k√∂nnen)


== Aufgabe

Bevor Sie das untere Klassendiagramm inspizieren, versuchen Sie selbst anhand der Textbeschreibung ein Klassendiagramm zu erstellen (Nutzen Sie daf√ºr am besten einfach ein Blatt Papier und einen Stift üòè).

TIP: Anhand des Textes sollen Sie herausfinden, welche m√∂glichen Klassen zu entwickeln sind. Alle m√∂glichen Klassen beim ersten Lesen zu identifizieren ist schwierig und gelingt nur selten. Das ist aber normal, und ein iterativer Prozess!

Ziel ist es ein einfaches Kursverwaltungsprogramm f√ºr verschiedene Lehrinstitute zu entwickeln.
Es soll m√∂glich sein ein Institut zu erstellen. Ein Institut hat einen Namen.
Au√üerdem verwaltet es eine Liste von Kursen.

Ein Kurs hat einen Namen, eine Liste von Teilnehmern, einen Trainer, ein Startdatum und ein Enddatum (beachten Sie die Box unten, welche einen kleinen Ausblick mit dem Umgang eines Datums zeigt).

IMPORTANT: F√ºr das Datum nutzen Sie die Klasse `LocalDate`. Diese kann bzw. muss nicht mit Zeitzonen umgehen und ist f√ºr unseren Einsatzzweck *f√ºrs Erste* ausreichend. Achtung: Wir haben gelernet, dass Objekte von Klassen nur √ºber dessen Konstruktor erzeugt werden k√∂nnen. *Das ist auch nach wie vor g√ºltig und der einzige Weg ein Objekt einer Klasse zu erzeugen!* Manche (Bibliotheks-) Klassen stellen dem Anwender aber auch *statische* Erzeugermethoden bereit, welche wiederum intern den Konstruktor aufrufen. Das bleibt uns als Anwender jedoch verborgen (es wird *abstrahiert*).
Um nun zu verhindern, dass ein Anwender wie wir den Konstruktor direkt aufruft (`new LocalDate(...)`), wird dieser als `private` deklariert. Somit ist er von au√üerhalb nicht mehr sichtbar.
Mehr dazu in sp√§teren Beispielen. F√ºrs Erste ist es wichtig zu wissen, dass ein `LocalDate` wie folgt erzeugt wird:

[source,java]
----
// erzeugt ein Objekt der Klasse LocalDate mit dem gewuentschen Datum (04. Mai 2022)
LocalDate date = LocalDate.of( 2022, 5, 4 );

// erzeugt ein Objekt der Klasse LocalDate mit dem heutigen Datum
LocalDate heute = LocalDate.now();
----

Ein Kursteilnehmer hat einen Vornamen, einen Nachnamen, ein Geburtsdatum, ein Geschlecht mit folgenden m√∂glichen Werten: m, w oder d (Nutzen Sie einen primitiven `char` f√ºr das Feld `geschlecht`). Alle Felder sollen beim Erzeugen eines Teilnehmer-Objekt bef√ºllt werden k√∂nnen. Bef√ºllen Sie die Felder mit Standardwerten, wenn invalide Parameter √ºbergeben wurden. z.b. geschlecht `-` wenn ein ung√ºltiger char √ºbergeben wurde.
Entwickeln Sie f√ºr den Teilnehmer eine Methode, welche das Alter als Ganzzahl zur√ºckgibt. Versuchen Sie selbst herauszufinden
wie Sie mit dem `LocalDate` das Alter berechnen k√∂nnen.
Au√üerdem schaffen Sie eine M√∂glichkeit, s√§mtliche Informationen eines Teilnehmers auf der Konsole auszugeben.

Es soll m√∂glich sein √ºber das Institut einen neuen Kurs erstellen zu k√∂nnen.
Relevant hierf√ºr ist der Kursname, der Kurszeitraum, die maximale Teilnehmeranzahl und wer der Trainer des Kurses ist.
Achtung, der Kursname soll eindeutig sein. d.h. bevor Sie einen Kurs zur Kursliste hinzuf√ºgen, m√ºssen Sie pr√ºfen,
ob der Kursname bereits in der Liste vorhanden ist.
Au√üerdem soll es im Institut m√∂glich sein nach Kursen zu suchen. Und zwar

* nach dem Kursnamen (es darf nur ein Kurs zur√ºckgegeben werden)
* nach einem Zeitraum (Es soll eine Liste von Kursen zur√ºckgegeben werden, welche zwischen dem √ºbergebenen Zeitraum liegt. Als Hinweis hier der m√∂gliche Methodenkopf `public List<Kurs> sucheKurseZwischen(LocalDate start, LocalDate end)`)


Bei einem Kurs soll es m√∂glich sein Teilnehmer einzutragen. Sie m√ºssen jedoch darauf achten, dass die maximale Anzahl
von Kursteilnehmern nicht √ºberschritten wird.
Entwickeln Sie eine Methode welche s√§mtliche Kursdaten + einige Statistiken (z.B. Durschnittsalter) auf die Konsole ausgibt.
Die Ausgabe soll in etwas so aussehen:

[source]
----
*********************************************
**************** KURSINFO *******************
*********************************************
Name:				Java 101
Trainer:			Michael Fischelmayer
Max. Anzahl:		3
Belegung in %:		100.0
Pl√§tze frei:		0
Frauenanteil in %:	33.333336
M√§nneranteil in %:	66.66667
Divers in %:		0.0
Durchschnitt Alter:	39.666668
-------------- Kursteilnehmer: --------------
Teilnehmer{vorname='Max', nachname='Mustermann', geburtstag=1990-01-06, geschlecht=m}
Teilnehmer{vorname='Julia', nachname='Herbst', geburtstag=1982-01-06, geschlecht=w}
Teilnehmer{vorname='Manfred', nachname='Konstant', geburtstag=1975-08-20, geschlecht=m}
----

Denken Sie daran, Funktionalit√§ten in einzelne Methode auszugliedern.
z.B. sollte die Berechnung des Durchschnittsalters in einer eigenen Methode erfolgen.
In der Methode in welcher Sie die Informationen auf die Konsole ausgeben soll die Methode zur
Durchschnittsalter-Berechnung dann nur noch aufgerufen werden.
Das gilt nat√ºrlich auch f√ºr die andere Funktionalit√§ten. z.b. Der Berechnung der Kursbelegung, usw.

TIP: Achten Sie generell darauf Ihre Daten (z.b. Parameter) auf Plausibilit√§t zu pr√ºfen.
Darf es z.b. sein einem Teilnehmer den Geburtstag 01.01.1792 zu geben? Darf der Vorname leer oder null sein?
Wenn ein Feld null sein darf, pr√ºfen Sie dann Ihre Felder auch auf `null` wenn Sie darauf zugreifen (Stichwort: `NullPointerException`)?
Eines der n√§chsten gro√üen Themen wird *Exception Handling*. Bis dahin m√ºssen wir uns damit begn√ºgen,
den ung√ºltigen Feldern Standardwerte bzw. Fehlerwerte zu geben.

IMPORTANT: Dieses Beispiel enth√§lt einfache Prozentrechnungen.
z.b. bei der Berechnung des Durchschnittsalters der Kursteilnehmer.
*WICHTIG*: Wenn Sie zwei Ganzzahlwerte (`int`) dividieren erhalten Sie wieder eine Ganzzahl.
Nehmen wir folgendes Beispiel: Sie haben drei Kursteilnehmer: einer ist 25, einer 39 und einer 42.
Das Gesamtalter ist somit 109. Das Ganze durch 3 dividiert, ergibt das Durchschnittsalter.
Es ist in userem Beispiel *35,3*. Diese Darstellung ist, wie wir schon wissen, mit einem Ganzzahldatentyp wie `int` einer ist, nicht m√∂glich weshalb wir hier eine Flie√ükommadarstellung ben√∂tigen.
*cast* ist hier das Zauberwort. Sie m√ºssen eine bestehende `int` Variable nach `float` casten. Mehr dazu im Kurs.

[source,java]
----
private float berechneDurchschnittsalter() {
    int alterAllerTeilnehmer = 0;
    for ( Teilnehmer t : teilnehmer ) {
        alterAllerTeilnehmer += t.berechnetAlter();
    }
    return (float) alterAllerTeilnehmer / teilnehmer.size(); // <-- hier der CAST!
}
----


== Erweiterungsm√∂glichkeiten

Seien Sie kreativ. Es gibt einige Funktionen, um welche Sie das Beispiel erweitern k√∂nnten:

z.b.

* Frauenquote f√ºr Kurse: Man darf m√§nnliche Teilnehmer nur hinzubuchen, wenn die Frauenquote erf√ºllt ist (Schwerer als es am erste Blick scheint!)


== M√∂gliches Klassendiagramm

<<<

=== Klassendiagramm

[plantuml,target=as1,format=png]
....
class Teilnehmer {
    - vorname: String
    - nachname: String
    - geburtstag: LocalDate
    - geschlecht: char
    ---
    + Teilnehmer(vorname: String, nachname: String, geburtstag: LocalDate, geschlecht: char)
    ---
    // getter und setter nach eigenem Ermessen
    + berechneAlter(): int
    + print()
}

class Trainer {
    - vorname: String
    - nachname: String
    ---
    + Trainer(vorname: String, nachname: String)
    ---
    // getter und setter nach eigenem Ermessen
}

class Institut {
    - name: String {readOnly}
    - kurse: List<Kurs> {readOnly}
    ---
    + Institut(name: String)
    ---
    // getter und setter nach eigenem Ermessen
    + kursHinzufuegen(name: String, maxTeilnehmerAnzahl: int, trainer: Trainer, von: LocalDate, bis: LocalDate)
    + sucheKurseZwischen(von: LocalDate, bis: LocalDate): List<Kurs>
    + sucheKurs(name: String): Kurs

}

class Kurs {
    - name: String {readOnly}
    - maxTeilnehmerAnzahl: int {readOnly}
    - von: LocalDate
    - bis: LocalDate
    - teilnehmer: List<Teilnehmer>
    - trainer: Trainer
    ---
    + Kurs(name: String, maxTeilnehmerAnzahl: int, von: LocalDate, bis: LocalDate, trainer: Trainer)
    ---
    // getter und setter nach eigenem Ermessen
    + teilnehmerEintragen(teilnehmer: Teilnehmer)
    + printKursinfo()
    - berechneDurchschnittsalter(): float
    - berechneKursbelegungInProzent(): float
    - kursbelegungNachGeschlecht(): Map<Character, Float>
}



class Main {
---
---
    +{static} main(args: String[])
}

Institut ---right Kurs
Teilnehmer ---left Kurs
Trainer --- Kurs
Kurs <--[hidden] Main
....

